\iffalse \bibliography{include/backmatter/magnus,include/backmatter/philip} \fi
\externaldocument{RelatedWork, Methodology, Analysis, Discussion, Conclusion}
\chapter{Introduction}
%funneling from the world to the actual problem 
In order for organisations to remain competitive, there is a need to continuously improve time to market for new products, features and services. The societal transformation of moving from a product economy to a service economy has affected the way organisations deliver prodcuts and services \cite{mckinsey}. Products are required to move from business requirements to delivery as fast as possible. This societal transformation from a product to service economy has given rise to a number of tools and methodologies to bring more value to customers in a shorter amount of time. Continuous integration (CI) and continuous deployment (CD) are software engineering concepts that have become strongly adopted by organisations in order to deal with the need for more agility. More agility is required in order to rapidly respond to change in customer requirements in a market that is constantly evolving. With a well designed CI and CD process, organisations can deploy new features to customers in a short amount of time and on a regular basis. Being able to deploy multiple times a month or even multiple times per day has become a competitive advantage for companies operating in the web domain \cite{facebook}. Companies can deploy new features quickly in order to verify customer value by carrying out practices such as A/B testing \cite{abtest}. The popularity and success of CI and CD is strongly based on web applications. Software development in the domain of web applications differ greatly when compared to embedded systems. Such systems are tightly coupled to hardware, electronics and mechanics that introduce complexities typically not seen for development in the web domain as identified by Lwakatare et al. \cite{7427859}. Continuous deployment of features is becoming an important factor for applications in the domain of Internet of Things (IoT) and cyber-physical systems (CPS). This is apparent in current literature \cite{gonz,cberger,2iot}, that experiment with virtual containers for CPS and IoT. 

Cyber-physical systems are computer systems collaborating and coordinating to control physical resources that interact with their surroundings \cite{cps}. CPS's are becoming an integral part of society and are already available to consumers in modern automotive vehicles. Collision avoidance, autonomous parking and autonomous highway driving are some examples of CPS's within the automotive domain. By nature, such systems are very complex in their design and development, involving multiple software and hardware components of different types and architectures. The new discipline of CPS aims to help designers and developers with the complexity of such systems, requiring expertise from three major disciplines: (1) communication in heterogeneous networks, (2) embedded and real-time systems and (3) control systems \cite{gonz}. \\

The continuous deployment of features for a vehicular CPS is challenging due to a number of reasons specific to the fact that they are real-time systems with safety and timing requirements. Furthermore, vehicular CPS's are typically resource constrained so scaling up hardware is limited to the physical capacity \cite{wan2011advances}. Since a CPS requires real-time operations, any additional overhead affecting performance should be handled with care. Overhead can introduce latency which may consequently impact timing requirements that can result in software malfunction. CPS's typically interact with their surroundings so safety is of a high concern. \\

%(needs stronger points to bridge over, why is deploying challenging? why is using VM's simplifying it? Which serious benefits?)
Deploying any complex system to a production environment is a challenging procedure. Using virtual machines simplifies the deployment process by packaging the application in a isolated sand-boxed environment. Shipping an application pre-installed in a virtual machine has some serious benefits. However, as real-time requirements are crucial to autonomous vehicles, the cost to performance must be identified if considering virtualization as a deployment platform.\\

%(autonomous = 'generalizable' , use self-driving vehicle) = drawing of how everything puts together, more examples. 

Virtualization can be done with a fully fledged virtual machine (e.g Oracle VirtualBox) or by using lightweight virtual containers. Virtual machines bring higher overhead as they require a full copy of a operating system as well as virtualizing the available hardware \cite{anderson2015docker}, so they are not suitable for vehicular CPS's. A more lightweight approach is to use virtual containers that share the host operating system (OS) rather than encapsulating an entire OS stack. Containerizing an application brings additional benefits. Runtime orchestration can be better controlled when executing applications that are sand-boxed from each-other where resources can be controlled and limited. A/B testing can also be performed between different containers, but above all, containers deliver an application in a highly portable environment.\\

This study aims to uncover the performance impact of using virtual containers for software deployment in the context of self-driving vehicles. Self driving vehicles require minimal delays during runtime to allow real-time computations that enable safe autonomous driving. Minimal time-delay is a fundamental concern for allowing lane-following, decision making, and other computations utilized by the autonomous vehicle to interact with its surroundings. The software composed for self-driving vehicles can benefit by the use of virtualization, during development (such as safe roll back and independent versioning) as well as post-development to ship updates and patches. In order to consider the use of virtual containers for CPS's, one needs to first understand the overhead that is introduced to ensure that the system meets the real-time requirements for safe driving.\\

In this study, an experiment is designed and executed to uncover the scheduling precision and input/output performance of two sample applications realised with the CPS open source development architecture, OpenDaVINCI \cite{OpenDaVINCI}. Measurement points, in the form of nanoseconds, are extracted from the sample applications during runtime in order to measure the applications timing behaviour when executed in a native environment or within a virtual container. Runtime latency of containerising two sample applications is mitigated by using a real-time enabled Linux kernel and comparing the performance to a stock Linux kernel. Docker\footnote{www.docker.com} is the chosen technology for containerising the applications since Docker is an open source project that offers fast deployment of applications inside portable containers with a highly consistent environment \cite{bernstein2014containers}. Furthermore, the results of the study are validated by replicating the experiment on a self-driving vehicle that participated in the 2016 Grand Cooperative Driving Challenge in The Netherlands.

%Software deployment for CPS is difficult as there are many aspects to put into consideration. Typically,  CPS are resource constrained, meaning that you cannot scale up hardware exponentially as you typically do not have the physical space for it. Secondly, real-time requirements are needed, so any SD tools needs to be lightweight. Finally, there are safety concerns since CPS typically interact with their surroundings. 

%---------------------------------------------------%
\section{Problem Domain \& Motivation}
% This is a dedicated section for problem and motivation, you should not deviate too much from our domain and context
% What is the connection with deployment?
% check if the info in this section is really reflecting and following the reasoning you pitched in the previous subsections

To our knowledge, there exists no evidence which presents argumentation on how state-of-art deployment strategies impact CPS systems in the domain of self-driving vehicles with their time sensitive performance requirements. There exists many studies that explore the performance overhead of using virtual containers for general purpose operating systems in the context of cloud-computing. However, cloud-computing requirements differ greatly to that of an self-driving vehicle. This creates a compelling gap in literature to explore virtual containers as a deployment platform in the domain of self-driving vehicles to build argumentation which decision makers can rely upon when determining for which deployment strategy is most suitable for the real-time application in question. The popularity of deployment strategies utilising containers is steadily increasing, thus making it important to understand the performance overhead introduced by containers such as Docker. While the implementation of virtualization technologies for deployment strategies brings many advantages, there still exists uncertainty to the disadvantage of how much, if any, performance overhead they carry.\\

It is of particular importance to understand this impact for decision makers responsible for determining deployment strategies for time-critical systems utilized by self-driving vehicles. The rationale being that real-time systems are time sensitive and must guarantee responses within a specified time. If the system is to violate the required response-time it may lead to software failure, which can potentially be catastrophic as autonomous vehicles interact with their surroundings. As a consequence it is crucial to ensure that the execution environment and deployment context will allow the real-time application to stay within its specified timing parameters. This is the gap in which the result of this research will seek to fulfil. Gaining specific measurement data from containerised applications to identify the performance overhead will be an ultimate factor when deciding an approach to software deployment for self-driving vehicles.

%---------------------------------------------------%
\section{Research Goal \& Research Questions}
% We need rationales to explain what we expect from these RQs. Further, it would be nice to have some preparation sentences that would justify asking these questions and not others

This research seeks to systematically study the impact various execution environments have on two sample applications realised with OpenDaVINCI in the following deployment contexts while applying load to the target system:\\ 

\begin{enumerate}
\item Executing the sample applications natively on Ubuntu Server LTS Linux.
\item Executing the sample applications inside a Docker container on Ubuntu Server LTS Linux.
\item Executing the sample applications natively on a real-time enabled Ubuntu Server LTS Linux.
\item Executing the sample applications inside a Docker container on a real-time enabled Ubuntu Server LTS Linux.\\
\end{enumerate}

The sample applications consists of two components tasked to measure scheduling precision and input/output performance respectively. 
Methods of experimentation is used to answer the following research questions:\\

\begin{enumerate}[label=\textbf{RQ\arabic*}]
\label{section:rqs}
	\item Does the respective execution environment influence the scheduling precision of the respective application?
	\item Does the respective execution environment influence the input/output performance of the respective application?\\
\end{enumerate}

Answering the research questions will build argumentation on whether using Docker as a deployment platform is viable for self-driving vehicles, as it has been established that CPS's can benefit greatly from continuous deployment. Schedulability analysis and input/output performance of two sample applications is measured to uncover if using Docker will impact the timing requirements of the applications, which are crucial for CPS.



%---------------------------------------------------%
\section{Contributions}
% The contribution made to the research community by answering the RQs.} 
% Many studies have analyzed virtual machines and containers to compare their performance cite. 

While this research bases its merits on a narrow field of interest, its application can be used for a broad audience within the research community as well as for organisations interested in adopting new technology to improve software deployment for cyber-physical systems. As more segments of today’s society are becoming automated and reliant on software decision making, real-time systems play an integral part of this development. Financial, aviation, and vehicle systems are just a few examples of domains with systems that are highly sensitive to time delays. A self-driving vehicle has to interpret its surroundings in real-time where any delay can have a catastrophic effect. Similarly, applications in the financial domain have to react to market fluctuations within nanoseconds to avoid loss on investment. There exists a large amount of research on the performance overhead of containerising applications in the context of cloud computing. This study presents results on the performance overhead, if any, in the context of vehicular CPS's. 

%---------------------------------------------------%
\section{Scope}
The scope of the study is in the domain of self-driving vehicles. The evaluation of two sample applications have been limited to evaluating scheduling precision and input/output performance. Other factors such as evaluating networking and memory overhead, although important, have been left for future work. Schedulability analysis and input/output performance are crucial factors for autonomous vehicles and so have been prioritised for the experiment. Schedulability as timing delays impact safe driving and secondly storing information (such as recording a video stream and logging sensor data) is important for the development of algorithms. 

% In this section we will introduce the scope which is self-driving vehicles. The hardware we are using is in-line with actual hardware used in autonomous vehicles. The software development architecture used for our experimental units have been adopted in research projects involving the actual development of autonomous vehicles. We do not aim for our results to be valid in other types of autonomous systems, such as drones.

%---------------------------------------------------%
\section{Structure of the thesis}
The remainder of the thesis is structured as follows: In section~\ref{sect:background} introduces the background of the paper, detailing the technology and concepts related to this study. Furthermore, related work and the process of gathering related work is specified. The research methodology is specified in section~\ref{section:methodology}, detailing information on the experiment carried out to answer the research questions. Section~\ref{section:data-analysis} introduces the results from the experiment, where as discussion and conclusion in section~\ref{section:discussion} and section~\ref{section:conclusion} is discussed.  

% Summary: In this section we will introduce a typical outline of the paper.}
%---------------------------------------------------%